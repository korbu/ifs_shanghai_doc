"use strict";(self.webpackChunkifs_shanghai_doc=self.webpackChunkifs_shanghai_doc||[]).push([[947],{7707:(n,e,s)=>{s.r(e),s.d(e,{data:()=>a});const a={key:"v-1e12f407",path:"/zh/eb_xelor/user_guide/eb_tresos.html",title:"EB tresos以及示例程序RT_RefApp指南",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"概述",slug:"概述",children:[]},{level:2,title:"在Windows平台安装Conan",slug:"在windows平台安装conan",children:[]},{level:2,title:"Install jfrog command line interface in Windows",slug:"install-jfrog-command-line-interface-in-windows",children:[{level:3,title:"Build the EB tresos binaries",slug:"build-the-eb-tresos-binaries",children:[]}]},{level:2,title:"RT_RefApp installation and build",slug:"rt-refapp-installation-and-build",children:[{level:3,title:"Getting the RT_RefApp binaries",slug:"getting-the-rt-refapp-binaries",children:[]},{level:3,title:"Build the RT_RefApp binaries",slug:"build-the-rt-refapp-binaries",children:[]}]}],filePathRelative:"zh/eb_xelor/user_guide/eb_tresos.md",git:{updatedTime:1633097608e3,contributors:[{name:"Qian Chen",email:"827391449@qq.com",commits:2}]}}},6484:(n,e,s)=>{s.r(e),s.d(e,{default:()=>sn});var a=s(6252);const o=(0,a.uE)('<h1 id="eb-tresos以及示例程序rt-refapp指南" tabindex="-1"><a class="header-anchor" href="#eb-tresos以及示例程序rt-refapp指南" aria-hidden="true">#</a> EB tresos以及示例程序RT_RefApp指南</h1><p>EB xelor 提供 EB tresos AutoCore文件以及CP示例程序RT_RefApp的Conan包。</p><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><p>本节介绍如何在Windows平台搭建Conan，使用Conan recipe构建/安装ET tresos和RT_RefApp。</p><div class="custom-container tip"><p class="custom-container-title">注意</p><p>目前EB tresos studio仅支持Windows。</p></div><p><strong>EB tresos AutoCore 组件:</strong></p><p>ACP, MCAL, ACG, and Generic modules-update</p><p>image:5978760A-28DC-4231-A04F-6752787DD6ED.png[Architecture,scaledwidth=&quot;50%&quot;]</p><h2 id="在windows平台安装conan" tabindex="-1"><a class="header-anchor" href="#在windows平台安装conan" aria-hidden="true">#</a> 在Windows平台安装Conan</h2><p>As EB tresos AutoCore and RT_RefApp run only on Windows OS. We need to set the Conan client on the Windows machine. EB tresos AutoCore is packaged as EB tresos conan recipes in EB xelor. Prerequisite: We assume that a bash shell is used, e.g. git-bash or cygwin.</p><p><strong>Python安装:</strong></p><ul><li><p>Download the OS corresponding python installer from https://www.python.org/. At least python version 3.8 is required.</p></li><li><p>Install python in the folder <code>C:\\Tools\\</code> (you can choose another directory)</p></li></ul><p><strong>Conan安装:</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python -m pip <span class="token function">install</span> -r tools/valeria/requirements.txt\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>For more Conan installation detail, please refer to https://docs.conan.io/en/latest/installation.html</p></div><div class="custom-container warning"><p class="custom-container-title">警告</p><p>The path length limitation shall be disabled.<br><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\FileSystem</code><code>LongPathsEnabled</code> shall be equal to 0x00000001</p></div><div class="custom-container warning"><p class="custom-container-title">警告</p><p>Even with the previous configuration, the build of EB tresos applications can fail due to long path names. This can be avoided by using conan feature to force short path names. Set the environment variables <code>CONAN_USER_HOME_SHORT=&quot;C:\\path\\to\\local-short-name-cache&quot;</code> and <code>CONAN_USE_ALWAYS_SHORT_PATHS=&quot;True&quot;</code> to activate this.</p></div><p><strong>安装Conan配置:</strong></p>',18),l=(0,a.Uk)("Get the EB xelor sources, see "),t=(0,a.Uk)("Obtain"),r=(0,a.Uk)("."),i=(0,a.Uk)("Update the conan remote repositories, see "),p=(0,a.Uk)("Configuration"),c=(0,a.Uk)("."),u=(0,a._)("li",null,[(0,a._)("p",null,"Go to the folder where the sources are located and run the Conan configuration installation:")],-1),d=(0,a.uE)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ conan config <span class="token function">install</span> config/conan/config\n$ conan config <span class="token function">install</span> config/conan/config_ci\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>Usually, the Conan configuration is installed in the local cache <code>C:\\Users\\&lt;User ID&gt;\\.conan\\</code><br> You can use different caches by defining the environment variable <code>CONAN_USER_HOME</code><br> Refer to https://docs.conan.io/en/latest/mastering/custom_cache.html</p></div><ul><li>Set the Conan username for the configured repositories:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>conan user -r eb_core-releases <span class="token operator">&lt;</span>artifactory<span class="token string">&#39;s login&gt;\nconan user -r eb_core-snapshots &lt;artifactory&#39;</span>s login<span class="token operator">&gt;</span>\nconan user -r eb_core-devdrops <span class="token operator">&lt;</span>artifactory&#39;s login<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',4),b={class:"custom-container tip"},h=(0,a._)("p",{class:"custom-container-title"},"提示",-1),m=(0,a.Uk)("If it requires the password, please enter the <Artifactory’s login>'s password. In case you only have access to the "),f=(0,a._)("code",null,"eb_core-releases",-1),g=(0,a.Uk)(" repository, you should omit the "),k=(0,a._)("code",null,"eb_core-snapshots",-1),_=(0,a.Uk)(" and "),v=(0,a._)("code",null,"eb_core-devdrops",-1),w=(0,a.Uk)(" repository initialization, see "),x=(0,a.Uk)("Configuration"),E=(0,a.Uk)("."),y=(0,a.uE)('<div class="custom-container tip"><p class="custom-container-title">提示</p><p>When using cygwin, it can happen that the credentials are not stored by conan when calling <code>conan user</code> from cygwin shell. In this case, please call the <code>conan user</code> command from Windows command line first. Afterwards you can continue using cygwin.</p></div><ul><li>Perform a Conan search command to make sure the result is returned:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ conan search -r eb_core-releases\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The response should be similar to:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Please log <span class="token keyword">in</span> to <span class="token string">&quot;eb_core-releases&quot;</span> to perform this action.\nExecute <span class="token string">&quot;conan user&quot;</span> command.\nPlease enter a password <span class="token keyword">for</span> <span class="token string">&quot;&lt;artifactory&#39;s login&gt;&quot;</span> account:\nExisting package recipes:\n\neb_adg/0.1.0@EBxelor/2020.10\neb_adg/0.4.0@EBxelor/2020.12-pre1\n<span class="token punctuation">..</span>.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="install-jfrog-command-line-interface-in-windows" tabindex="-1"><a class="header-anchor" href="#install-jfrog-command-line-interface-in-windows" aria-hidden="true">#</a> Install jfrog command line interface in Windows</h2><p>This is only necessary in case you want to rebuild EB xelor packages from source. The incoming supplies for Tresos are stored in Artifactory and jfrog cli is used to access those.</p><ul><li>jfrog installation:</li></ul><p>Download the jfrog from https://api.bintray.com/content/jfrog/jfrog-cli-go/$latest/jfrog-cli-windows-amd64/jfrog.exe?bt_package=jfrog-cli-windows-amd64[jfrog cli website]</p><ul><li>Set jfrog PATH:</li></ul><p>Move jfrog.exe to your work directory: e.g. ../workspace/jfrog.exe + Add the work directory of jfrog (e.g. ../workspace) into <code>Environment Variables-&gt;System variables-&gt;Path</code></p><ul><li>jfrog configuration:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ jfrog rt config --url<span class="token operator">=</span>https://artifactory-central.elektrobit.com/ <span class="token punctuation">\\</span>\n--user<span class="token operator">=</span>EB_account_user --password<span class="token operator">=</span>EB_account_password\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',13),R=(0,a.Uk)("jfrog configuration on windows is equivalent to linux, please refer to "),A=(0,a.Uk)("Docker"),C=(0,a.Uk)(" section."),B=(0,a._)("h3",{id:"build-the-eb-tresos-binaries",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#build-the-eb-tresos-binaries","aria-hidden":"true"},"#"),(0,a.Uk)(" Build the EB tresos binaries")],-1),T={class:"custom-container tip"},U=(0,a._)("p",{class:"custom-container-title"},"提示",-1),q=(0,a.Uk)("Please refer to "),S=(0,a.Uk)("Valeria"),j=(0,a.Uk)(" for building the whole EB tresos locally."),W=(0,a._)("h2",{id:"rt-refapp-installation-and-build",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#rt-refapp-installation-and-build","aria-hidden":"true"},"#"),(0,a.Uk)(" RT_RefApp installation and build")],-1),$=(0,a._)("p",null,[(0,a.Uk)("RT_RefApp's project configuration is stored in "),(0,a._)("code",null,"pkg\\eb_rt-refapp\\workspace\\")],-1),D=(0,a._)("h3",{id:"getting-the-rt-refapp-binaries",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#getting-the-rt-refapp-binaries","aria-hidden":"true"},"#"),(0,a.Uk)(" Getting the RT_RefApp binaries")],-1),I=(0,a._)("p",null,[(0,a._)("strong",null,"Prerequisite:"),(0,a._)("br"),(0,a.Uk)(" Conan setup on windows.")],-1),N=(0,a.Uk)("In case you did not use "),P=(0,a.Uk)("Valeria"),O=(0,a.Uk)(" to build, please note that the conan profiles are using conan user and channel. You need to create a file called "),H=(0,a._)("code",null,"get_user_channel",-1),L=(0,a.Uk)(" in folder "),z=(0,a._)("code",null,"config/valeria/r-car-h3/profiles",-1),M=(0,a.Uk)(" specifying user and channel. In this example we use user "),F=(0,a._)("code",null,"EBxelor",-1),G=(0,a.Uk)(" and channel "),Y=(0,a._)("code",null,"2020.12",-1),V=(0,a.Uk)("."),K=(0,a.uE)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">CONAN_USER</span><span class="token operator">=</span>EBxelor\n<span class="token assign-left variable">CONAN_CHANNEL</span><span class="token operator">=</span><span class="token number">2020.12</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Step 1<br> Search all available RT_RefApp packages from EB xelor Artifactory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ conan search -r eb_core-releases eb_rt-refapp\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The response should be similar to:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Existing package recipes:\n\neb_rt-refapp/0.3.5@EBxelor/2020.12\n...\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Step 2<br> Create empty directory and install EB tresos AutoCore binaries from EB xelor Artifactory. Replace version number and user/channel in the call in case you want to download other versions.</p><p>For R-car H3:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ mkdir RT_RefApp\n$ cd RT_RefApp\n$ conan install --profile:build \\\n  ../EBxelor-2020.12/config/valeria/r-car-h3/profiles/build/windows_x86_64 \\\n  --profile:build \\\n  ../EBxelor-2020.12/config/valeria/r-car-h3/profiles/build/soc_specific \\\n  --profile:host \\\n  ../EBxelor-2020.12/config/valeria/r-car-h3/profiles/host/R7 \\\n  --profile:host \\\n  ../EBxelor-2020.12/config/valeria/r-car-h3/profiles/host/keil_arm \\\n  -r eb_core-releases eb_rt-refapp/0.3.5@EBxelor/2020.12\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>For NXP S32G:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> RT_RefApp\n$ <span class="token builtin class-name">cd</span> RT_RefApp\n$ conan <span class="token function">install</span> --profile:build <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBxelor-2020.12/config/valeria/s32g/profiles/build/windows_x86_64 <span class="token punctuation">\\</span>\n  --profile:build <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBxelor-2020.12/config/valeria/s32g/profiles/build/soc_specific <span class="token punctuation">\\</span>\n  --profile:host <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBxelor-2020.12/config/valeria/s32g/profiles/host/M7 <span class="token punctuation">\\</span>\n  --profile:host <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBxelor-2020.12/config/valeria/s32g/profiles/host/gcc7_arm32 <span class="token punctuation">\\</span>\n  -r eb_core-releases eb_rt-refapp/0.3.5@EBxelor/2020.12\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>This step will just download the RT_RefApp <em>elf</em> file.</p></div><h3 id="build-the-rt-refapp-binaries" tabindex="-1"><a class="header-anchor" href="#build-the-rt-refapp-binaries" aria-hidden="true">#</a> Build the RT_RefApp binaries</h3>',12),Q={class:"custom-container tip"},X=(0,a._)("p",{class:"custom-container-title"},"提示",-1),J=(0,a.Uk)("Please refer to "),Z=(0,a.Uk)("Valeria"),nn=(0,a.Uk)(" for building the RT_RefApp locally."),en=(0,a.uE)('<p>This chapter will show you how to build the RT_RefApp manually or with CI.</p><p>RT_RefApp build workflow:</p><p>image:E83B1387-9D8C-4660-9DCA-23AD07D76041.png[Architecture,scaledwidth=&quot;50%&quot;]</p><p>Please follow the below command instruction to build the RT_RefApp in the local cache. Replace <code>user/valeria-test</code> by the conan user and channel that you are using.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> RT_RefApp\n$ <span class="token builtin class-name">cd</span> RT_RefApp\n$ conan <span class="token function">install</span> --build missing <span class="token punctuation">\\</span>\n  --profile:host <span class="token punctuation">..</span>/EBcore-main/config/valeria/r-car-h3/profiles/host/R7 <span class="token punctuation">\\</span>\n  --profile:host <span class="token punctuation">..</span>/EBcore-main/config/valeria/r-car-h3/profiles/host/keil_arm <span class="token punctuation">\\</span>\n  --profile:build <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBcore-main/config/valeria/r-car-h3/profiles/build/windows_x86_64 <span class="token punctuation">\\</span>\n  --profile:build <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBcore-main/config/valeria/r-car-h3/profiles/build/soc_specific <span class="token punctuation">\\</span>\n  <span class="token punctuation">..</span>/EBcore-main/pkg/eb_rt-refapp/conan user/valeria-test\n$ conan <span class="token builtin class-name">source</span> <span class="token punctuation">..</span>/EBcore-main/pkg/eb_rt-refapp/conan/conanfile.py\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The response should be similar to:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Using lockfile: <span class="token string">&#39;D:\\tmp\\refapp/conan.lock&#39;</span>\nUsing cached profile from lockfile\nconanfile.py <span class="token punctuation">(</span>eb_rt-refapp/0.2.0@user/valeria-test<span class="token punctuation">)</span>: <span class="token punctuation">\\</span>\nConfiguring sources <span class="token keyword">in</span> D:<span class="token punctuation">\\</span>tmp<span class="token punctuation">\\</span>refapp\nconanfile.py <span class="token punctuation">(</span>eb_rt-refapp/0.2.0@user/valeria-test<span class="token punctuation">)</span>: <span class="token punctuation">\\</span>\nExecuting exports to: D:<span class="token punctuation">\\</span>tmp<span class="token punctuation">\\</span>refapp\nconanfile.py <span class="token punctuation">(</span>eb_rt-refapp/0.2.0@user/valeria-test<span class="token punctuation">)</span>: <span class="token punctuation">\\</span>\nexports_sources: Copied <span class="token number">1</span> file: .project\nconanfile.py <span class="token punctuation">(</span>eb_rt-refapp/0.2.0@user/valeria-test<span class="token punctuation">)</span>: <span class="token punctuation">\\</span>\nexports_sources: Copied <span class="token number">32</span> <span class="token string">&#39;.mem&#39;</span> files\nconanfile.py <span class="token punctuation">(</span>eb_rt-refapp/0.2.0@user/valeria-test<span class="token punctuation">)</span>: <span class="token punctuation">\\</span>\nexports_sources: Copied <span class="token number">45</span> <span class="token string">&#39;.xdm&#39;</span> files\n<span class="token punctuation">..</span>.\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>If you are using <code>git bash</code> or <code>cygwin</code> console, you can use below command to continue. If you are using Windows <code>cmd</code>, please replace <code>export</code> by <code>set</code>.</p></div><p>Set the environment variable for EB tresos license server:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">EB_LICENSE_FILE</span><span class="token operator">=</span><span class="token string">&quot;&lt;Address of the EB tresos license server&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>Here we need to set the absolute path to the RT_RefApp project&#39;s directory.</p></div><p>Set the environment variable for ARM Keil:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">ARMLMD_LICENSE_FILE</span><span class="token operator">=</span><span class="token string">&quot;The adresse of the ARM Keil license server&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Call the Conan <code>build</code> method to generate the RT_RefApp&#39;s configuration and make the build</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ conan build <span class="token punctuation">..</span>/EBcore-main/pkg/eb_rt-refapp/conan/conanfile.py\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',15),sn={render:function(n,e){const s=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[o,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("p",null,[l,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/obtain.html"},{default:(0,a.w5)((()=>[t])),_:1}),r])]),(0,a._)("li",null,[(0,a._)("p",null,[i,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/configuration.html"},{default:(0,a.w5)((()=>[p])),_:1}),c])]),u]),d,(0,a._)("div",b,[h,(0,a._)("p",null,[m,f,g,k,_,v,w,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/configuration.html"},{default:(0,a.w5)((()=>[x])),_:1}),E])]),y,(0,a._)("p",null,[R,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/docker.html"},{default:(0,a.w5)((()=>[A])),_:1}),C]),B,(0,a._)("div",T,[U,(0,a._)("p",null,[q,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/valeria.html"},{default:(0,a.w5)((()=>[S])),_:1}),j])]),W,$,D,I,(0,a._)("p",null,[N,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/valeria.html"},{default:(0,a.w5)((()=>[P])),_:1}),O,H,L,z,M,F,G,Y,V]),K,(0,a._)("div",Q,[X,(0,a._)("p",null,[J,(0,a.Wm)(s,{to:"/zh/eb_xelor/user_guide/valeria.html"},{default:(0,a.w5)((()=>[Z])),_:1}),nn])]),en],64)}}}}]);