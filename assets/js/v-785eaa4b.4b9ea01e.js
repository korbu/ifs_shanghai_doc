"use strict";(self.webpackChunkifs_shanghai_doc=self.webpackChunkifs_shanghai_doc||[]).push([[562],{629:(e,s,a)=>{a.r(s),a.d(s,{data:()=>n});const n={key:"v-785eaa4b",path:"/zh/eb_corbos_starterkit/trouble_shooting.html",title:"常见问题",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"Some IP通讯失败",slug:"some-ip通讯失败",children:[]},{level:2,title:"qemu 与外部网络通信",slug:"qemu-与外部网络通信",children:[]},{level:2,title:"ipv4 支持",slug:"ipv4-支持",children:[]}],filePathRelative:"zh/eb_corbos_starterkit/trouble_shooting.md",git:{updatedTime:1632147602e3,contributors:[{name:"Qian Chen",email:"KimChan2013@users.noreply.github.com",commits:3}]}}},2036:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var n=a(6252);const i=(0,n.uE)('<h1 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题" aria-hidden="true">#</a> 常见问题</h1><h2 id="some-ip通讯失败" tabindex="-1"><a class="header-anchor" href="#some-ip通讯失败" aria-hidden="true">#</a> Some IP通讯失败</h2><p>在qemu中执行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> ww <span class="token operator">|</span> <span class="token function">grep</span> com_daemon\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',4),o=(0,n.Uk)("查看com_daemon是否把配置文件加上。 "),c=["src"],l=(0,n._)("p",null,[(0,n._)("code",null,"/usr/bin/com_daemon"),(0,n.Uk)(" 应该是-m 选项， 来指定load的manifest file,"),(0,n._)("br"),(0,n.Uk)(" 如果不是，则需要执行")],-1),r=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,"systemctl restart com-daemon-container\n")]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br")])],-1),t=(0,n.Uk)("来重启com-daemon "),p=["src"],d=(0,n.uE)('<h2 id="qemu-与外部网络通信" tabindex="-1"><a class="header-anchor" href="#qemu-与外部网络通信" aria-hidden="true">#</a> qemu 与外部网络通信</h2><p>需要将<code>qemu</code>的网卡作为master 来桥接， 执行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> ens33 master ara_br\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>其中<code>ens33</code>是host 的网卡</p><h2 id="ipv4-支持" tabindex="-1"><a class="header-anchor" href="#ipv4-支持" aria-hidden="true">#</a> ipv4 支持</h2><p>EB corbos studio 默认支持ipv6 , 如果想使用ipv4 , 需要手动启动com-daemon，配置相应的ipv4 地址。以qemu1 为例：</p><p>登陆到qemu</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ssh</span> -o <span class="token assign-left variable">StrictHostKeyChecking</span><span class="token operator">=</span>no root@fd00::eb:1\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看com_daemon 默认指令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> ww <span class="token operator">|</span> <span class="token function">grep</span> com_daemon \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',10),u=["src"],m=(0,n.uE)('<p>可以看到默认的ipv6 地址， 需要将其改成ipv4 地址:</p><p>进入adaptivecore-container</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>runc <span class="token builtin class-name">exec</span> -t adaptivecore-container <span class="token function">sh</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>查看ip 地址：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ifconfig</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',5),b=["src"],h=(0,n.uE)('<p>可以看到ipv4 地址： <code>192.168.7.126</code></p><p>启动com_daemon：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> /usr/bin/com_daemon -d -i <span class="token number">192.168</span>.7.126 -n eth0 <span class="token punctuation">\\</span>\n-m /etc/adaptive/ara_Com/daemon_1/sensor_manager_someip_machine1.json -c <span class="token number">255</span> <span class="token punctuation">\\</span>\n-e /var/run/adaptive/ara_Com/ara_com_sm -g /var/run/adaptive/ara_Com/ara_com_gw_1_\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><ol><li>命令是进到 adaptivecore-container 里执行操作，-i 后的地址是adaptive-container 的ip地址</li><li>-m 后面加的是someip manifest文件路径，注意是adaptivecore-container内的文件路径， 默认我们会做<code>mount</code>操作， 上述路径就是<code>deploy</code>默认路径， 只需要改文件名即可</li></ol></div>',4),g={render:function(e,s){return(0,n.wg)(),(0,n.iD)(n.HY,null,[i,(0,n._)("p",null,[o,(0,n._)("img",{src:e.$withBase("/images/eb_corbos_starterkit/trouble_shooting/check_config.png"),alt:"检查配置"},null,8,c)]),l,r,(0,n._)("p",null,[t,(0,n._)("img",{src:e.$withBase("/images/eb_corbos_starterkit/trouble_shooting/restart_com_daemon.png"),alt:"检查配置"},null,8,p)]),d,(0,n._)("img",{src:e.$withBase("/images/eb_corbos_starterkit/trouble_shooting/com_daemon.png"),alt:"检查配置"},null,8,u),m,(0,n._)("img",{src:e.$withBase("/images/eb_corbos_starterkit/trouble_shooting/ifconfig.png"),alt:"检查配置"},null,8,b),h],64)}}}}]);