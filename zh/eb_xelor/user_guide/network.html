<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <title>网络配置指南 | Elektrobit 文档中心</title><meta name="description" content="这里有所有你希望阅读到的Elektrobit公开文档以及各种各样的AUTOSAR知识👍">
    <link rel="preload" href="/ifs_shanghai_doc/assets/js/runtime~app.dd0e7869.js" as="script"><link rel="preload" href="/ifs_shanghai_doc/assets/css/styles.13e813b5.css" as="style"><link rel="preload" href="/ifs_shanghai_doc/assets/js/812.60586aed.js" as="script"><link rel="preload" href="/ifs_shanghai_doc/assets/js/app.3beca432.js" as="script">
    <link rel="stylesheet" href="/ifs_shanghai_doc/assets/css/styles.13e813b5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/ifs_shanghai_doc/zh/" class=""><img class="logo" src="/ifs_shanghai_doc/images/logo.png" alt="Elektrobit 文档中心"><span class="site-name can-hide">Elektrobit 文档中心</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/ifs_shanghai_doc/zh/eb_corbos_starterkit/introduction.md" class="nav-link" aria-label="EB corbos StarterKit"><!--[--><!--]--> EB corbos StarterKit <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ifs_shanghai_doc/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/network.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/ifs_shanghai_doc/zh/eb_corbos_starterkit/introduction.md" class="nav-link" aria-label="EB corbos StarterKit"><!--[--><!--]--> EB corbos StarterKit <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ifs_shanghai_doc/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/network.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="网络配置指南" tabindex="-1"><a class="header-anchor" href="#网络配置指南" aria-hidden="true">#</a> 网络配置指南</h1><p>EB xelor provides EB corbos Virtual Ethernet Switch to enable internal and external Ethernet communication of RT_RefApp and all VMs running on Hypervisor.</p><h2 id="eb-xelor-网络设置" tabindex="-1"><a class="header-anchor" href="#eb-xelor-网络设置" aria-hidden="true">#</a> EB xelor 网络设置</h2><p>EB xelor contains RT_RefApp and VMs running on Hypervisor as the Ethernet user. This chapter lists all Ethernet user Network settings.</p><p><strong>RT_RefApp 网络设置</strong>:</p><ul><li><strong>IP 地址</strong>: <ul><li><em>IPv4</em>: 192.168.7.73</li><li><em>IPv6</em>: fd00::eb:73/64</li></ul></li><li><strong>MAC 地址</strong>: AA:BB:CC:DD:00:33</li><li><strong>测试机 IP 地址</strong>: <ul><li><em>IPv4</em>: 192.168.7.100</li><li><em>IPv6</em>: fd00::eb:100/64</li></ul></li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><p>The test machine&#39;s Ethernet interface settings must be consistent with which of RT_RefApp: Ethernet interface: 1000Mb/s as speed with FUll duplex.</p></div><p>Currently we have 3 Adaptive AUTOSAR VMs running on Hypervisor:</p><ul><li><strong>vm-hub 网络设置</strong>: <ul><li><strong>IPv4</strong>: 192.168.7.1</li><li><strong>IPv6</strong>: fd00::eb:1/64</li><li><strong>MAC 地址</strong>: AA:BB:CC:DD:00:34</li></ul></li><li><strong>vm-alpha 网络设置</strong>: <ul><li><strong>IPv4</strong>: 192.168.7.2</li><li><strong>IPv6</strong>: fd00::eb:2/64</li><li><strong>MAC 地址</strong>: AA:BB:CC:DD:00:35</li></ul></li><li><strong>vm-beta 网络设置</strong>: <ul><li><strong>IPv4</strong>: 192.168.7.3</li><li><strong>IPv6</strong>: fd00::eb:3/64</li><li><strong>MAC 地址</strong>: AA:BB:CC:DD:00:36</li></ul></li></ul><h2 id="eb-corbos-vswitch-介绍" tabindex="-1"><a class="header-anchor" href="#eb-corbos-vswitch-介绍" aria-hidden="true">#</a> EB corbos vSwitch 介绍</h2><p>EB corbos Virtual Ethernet Switch 是 EB corbos 产品线的一部分，也可以使用在 EB tresos 项目中。 本节介绍 EB corbos vSwitch 如何为RT_RefApp和不同的VMs之间提供网络通信。</p><div class="custom-container tip"><p class="custom-container-title">提示</p><p>EB corbos vSwitch 工作模式和RT_RefApp的调度和内存配置有关。 RT_RefApp操作系统负责配置并保护虚拟机的Virtual Ethernet driver 和 Virtio device proxy的内存分区。</p></div><p><strong>EB corbos Virtual Ethernet Switch包含以下组件:</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>TODO: Wait to insert a structure photo of vSwitch from EA document
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><strong>Virtual Ethernet driver</strong>. 每个虚拟机和RT_RefApp都需要有各自的Virtual Ethernet driver以保证以太网通信。 Virtual Ethernet driver是虚拟机和RT_RefApp 以太网协议栈的底层驱动。 它不会和以太网控制器硬件通信，而是和EB corbos vSwitch通信，包含以下实体: <ul><li><strong>Reception buffer queue</strong>: The reception buffer queue is used for receiving Ethernet packets and must be configured as non-cached(Which is configured in MkMemoryProtection of OS). Each Virtual Ethernet driver can have one or more reception buffer queues (separated to receive external and internal traffic).</li><li><strong>Transmission buffer queue</strong>: The transmission buffer queue is used for transmitting of Ethernet packets and must be configured as non-cached(Which is configured in MkMemoryProtection of OS). There can be one or more transmission buffer queues with own QoS configurations.</li><li><strong>Control queue</strong>: The control queue is used to communicate to the local MAC addresses (unicast address and multicast addresses) from the Virtual Ethernet driver to the EB corbos vSwitch.</li></ul></li><li><strong>VirtIO device proxy</strong>. VirtIO device proxy是Hypervisor的一个独立应用。每一个Adaptive AUTOSAR虚拟机都需要有一个VirtIO device proxy (RT_RefApp和Classic AUTOSAR虚拟机不需要)。 VirtIO device proxy会将所有VirtIO设备配置空间访问转换成与EB corbos vSwitch的shared memory通信。</li><li><strong>EB corbos Virtual Ethernet Switch</strong>. EB corbos vSwitch 在RT_RefApp中实现，直接控制硬件设备SysDMA和EthCtrl。 它包含以下实例: <ul><li><strong>Reception buffers (external)</strong>: A buffer queue for receiving multicast and broadcast Ethernet packets from the external Ethernet bus.</li><li><strong>Reception Dispatcher</strong>: Handle all received Ethernet packets (Both from external Ethernet bus or from internal VMs or RT_RefApp).</li><li><strong>Transmission Dispatcher</strong>: Detect and forward new Ethernet packets which are ready to transmit in the transmission buffer queues of every Virtual Ethernet driver.</li></ul></li><li><strong>System DMA</strong> is used for copying ethernet packets from EB corbos vSwitch to different VMs.</li><li><strong>Ethernet controller</strong> is the hardware unit for sending and receiving of ethernet packets to and from the external Ethernet bus.</li><li><strong>Hypervisor</strong>: The Hypervisor allocates memory ressources from the global DRAM and maps the appropriate memory regions for the Virtual Ethernet driver and VirtIO device proxy instance to the different execution environments in order to provide memory separation (for the purpose that different virtual machines may host potentially different guest operating systems).<br> The Hypervisor handles interrupts and exceptions of the virtual machines (e.g. when a new ethernet packet is available in the reception buffer queue of a virtual machine,<br> the Hypervisor triggers the according interrupt for the Virtual Ethernet driver in that virtual machine).</li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/10/1 下午1:25:11</span></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 827391449@qq.com">Qian Chen</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/ifs_shanghai_doc/assets/js/runtime~app.dd0e7869.js" defer></script><script src="/ifs_shanghai_doc/assets/js/812.60586aed.js" defer></script><script src="/ifs_shanghai_doc/assets/js/app.3beca432.js" defer></script>
  </body>
</html>
