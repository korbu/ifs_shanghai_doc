<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <title>Valeria - æ„å»ºå®Œæ•´EB xelorè½¯ä»¶åŒ… | Elektrobit æ–‡æ¡£ä¸­å¿ƒ</title><meta name="description" content="è¿™é‡Œæœ‰æ‰€æœ‰ä½ å¸Œæœ›é˜…è¯»åˆ°çš„Elektrobitå…¬å¼€æ–‡æ¡£ä»¥åŠå„ç§å„æ ·çš„AUTOSARçŸ¥è¯†ğŸ‘">
    <link rel="preload" href="/ifs_shanghai_doc/assets/js/runtime~app.dd0e7869.js" as="script"><link rel="preload" href="/ifs_shanghai_doc/assets/css/styles.13e813b5.css" as="style"><link rel="preload" href="/ifs_shanghai_doc/assets/js/812.60586aed.js" as="script"><link rel="preload" href="/ifs_shanghai_doc/assets/js/app.3beca432.js" as="script">
    <link rel="stylesheet" href="/ifs_shanghai_doc/assets/css/styles.13e813b5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/ifs_shanghai_doc/zh/" class=""><img class="logo" src="/ifs_shanghai_doc/images/logo.png" alt="Elektrobit æ–‡æ¡£ä¸­å¿ƒ"><span class="site-name can-hide">Elektrobit æ–‡æ¡£ä¸­å¿ƒ</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/ifs_shanghai_doc/zh/eb_corbos_starterkit/introduction.md" class="nav-link" aria-label="EB corbos StarterKit"><!--[--><!--]--> EB corbos StarterKit <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ifs_shanghai_doc/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/valeria.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/ifs_shanghai_doc/zh/eb_corbos_starterkit/introduction.md" class="nav-link" aria-label="EB corbos StarterKit"><!--[--><!--]--> EB corbos StarterKit <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="é€‰æ‹©è¯­è¨€"><span class="title">é€‰æ‹©è¯­è¨€</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ifs_shanghai_doc/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/valeria.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="ç®€ä½“ä¸­æ–‡"><!--[--><!--]--> ç®€ä½“ä¸­æ–‡ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="valeria-æ„å»ºå®Œæ•´eb-xelorè½¯ä»¶åŒ…" tabindex="-1"><a class="header-anchor" href="#valeria-æ„å»ºå®Œæ•´eb-xelorè½¯ä»¶åŒ…" aria-hidden="true">#</a> Valeria - æ„å»ºå®Œæ•´EB xelorè½¯ä»¶åŒ…</h1><p>EB xeloré™„å¸¦åä¸º&quot;Valeria&quot;çš„æ„å»ºå·¥å…·ï¼Œæ”¯æŒä¸ºä¸åŒçš„SoCæ„å»ºå¯¹åº”çš„EB xelorè½¯ä»¶åŒ…ã€‚ Valeriaå°è£…äº†Conanå‘½ä»¤çš„è°ƒç”¨ï¼Œé€šè¿‡å•ä¸€æŒ‡ä»¤æ–¹ä¾¿ç”¨æˆ·æ„å»ºxelorè½¯ä»¶ã€‚ EB xeloråŒ…å«æ‹¥æœ‰ä¸åŒå±æ€§çš„ConanåŒ…é›†åˆï¼Œä¾‹å¦‚è¿è¡Œåœ¨A5xè¿™æ ·æ€§èƒ½æ ¸ä¸Šçš„EB corbos Linuxï¼Œè¿è¡Œåœ¨R7è¿™æ ·å®æ—¶æ ¸ä¸Šçš„RT_RefAppï¼Œç›´æ¥è¿è¡Œåœ¨CPUä¸Šçš„å›ºä»¶ï¼Œè¿è¡Œåœ¨EB corbos Linuxä¸Šçš„EB corbos AdaptiveCoreã€‚ Conanå¯ä»¥æ ¹æ®å®šä¹‰åœ¨profilesä¸­çš„è®¾ç½®æˆ–é€‰é¡¹ï¼Œè¿›è¡Œä¸åŒå±æ€§çš„å¤„ç†ã€‚ EB xeloré¡¹ç›®åŒ…å«å¾ˆå¤šä¸åŒå±æ€§çš„åŒ…ï¼Œå¦‚æœæƒ³è·å–æ‰€æœ‰éœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡éƒ½éœ€è¦è°ƒç”¨å¾ˆå¤šæ¬¡Conanå‘½ä»¤ï¼ŒValeriaåˆ™ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œé€šè¿‡è¯»å–å¯¹åº”manifestä¸­çš„æ„å»ºä¿¡æ¯ï¼Œè°ƒç”¨ç›¸åº”çš„ConanæŒ‡ä»¤ã€‚</p><h2 id="åŸºæœ¬ç†å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç†å¿µ" aria-hidden="true">#</a> åŸºæœ¬ç†å¿µ</h2><p>Valeriaé¦–å…ˆè°ƒç”¨ <code>conan export</code> è·å¾—æ‰€æœ‰çš„EB xelor recipesï¼Œä¿è¯ConançŸ¥é“å¦‚ä½•æ„å»ºæ‰€æœ‰åŒ…ã€‚ç„¶åè°ƒç”¨ <code>conan install --build</code> å¼€å§‹æ„å»ºã€‚æœ€åï¼Œå®ƒä¼šä¸Šä¼ è¿™äº›ConanåŒ…åˆ°è¿œç¨‹ä»“åº“ï¼Œä¾‹å¦‚Arifactoryã€‚</p><p>ä¸ºäº†ä¿è¯æ­£ç¡®åœ°æ„å»ºå¯¹åº”å¹³å°çš„åŒ…ï¼ŒValeriaä½¿ç”¨ <a href="https://docs.conan.io/en/latest/reference/profiles.html#build-profiles-and-host-profiles" target="_blank" rel="noopener noreferrer">conan build and host profiles<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>ã€‚</p><p>ç»†èŠ‚è¯·å‚è€ƒåç»­ç« èŠ‚ã€‚</p><h2 id="build-manifest" tabindex="-1"><a class="header-anchor" href="#build-manifest" aria-hidden="true">#</a> Build manifest</h2><p>Manifestæ–‡ä»¶æè¿°äº†å“ªäº›åŒ…éœ€è¦æ„å»ºï¼Œå¦‚ä½•æ„å»ºè¿™äº›åŒ…ç­‰ä¿¡æ¯ã€‚</p><p>å¯¹äºR-Car H3ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªmanifestæ–‡ä»¶</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config/valeria/r-car-h3/manifests/buildmanifest_linuxbuild.xml
config/valeria/r-car-h3/manifests/buildmanifest_windowsbuild.xml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœæ˜¯S32Gï¼Œåˆ™æ˜¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>config/valeria/s32g/manifests/buildmanifest_linuxbuild.xml
config/valeria/s32g/manifests/buildmanifest_windowsbuild.xml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>buildmanifest_linuxbuild.xml</code> ä»£è¡¨Valeriaä¼šæ ¹æ®è¿™ä¸ªmanifestæ–‡ä»¶åœ¨Linuxç¯å¢ƒä¸­æ„å»ºConanåŒ…ï¼Œä¸ä¹‹å¯¹åº”çš„ï¼Œ<code>buildmanifest_windowsbuild.xml</code> ä»£è¡¨éœ€è¦åœ¨Windowsç¯å¢ƒæ„å»ºçš„manifestã€‚</p><p>å¯¹äºæ¯ä¸€ä¸ªåŒ…ï¼Œéƒ½éœ€è¦å®šä¹‰ä¸€å¥—hostå’Œhuild profilesã€‚ ä¾‹å¦‚ï¼Œ<code>config/valeria/s32g/manifests/buildmanifest_linuxbuild.xml</code> ä¸­ <code>u-boot</code> ä¿¡æ¯:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ComponentBuildSpec</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BuildProfile</span><span class="token punctuation">&gt;</span></span>build/linux_x86_64<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BuildProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostProfile</span><span class="token punctuation">&gt;</span></span>host/A53<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HostProfile</span><span class="token punctuation">&gt;</span></span>host/gcc7_arm64<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HostProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Recipe</span><span class="token punctuation">&gt;</span></span>eb_u-boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Recipe</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ComponentBuildSpec</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>u-boot</code> åœ¨Linux x86_64ç¯å¢ƒä¸­æ„å»ºï¼Œè¿è¡Œåœ¨S32G SoCçš„A53æ ¸ä¸Šã€‚ å› æ­¤æˆ‘ä»¬å®šä¹‰BuildProfileä¸º <code>build/linux_x86_64</code>ï¼ŒHostProfileåˆ™æ˜¯ <code>host/A53</code>ã€‚ æˆ‘ä»¬è¿˜ä¼šç”¨åˆ°gcc-linaroç¼–è¯‘å™¨æ¥æ„å»º <code>u-boot</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªHostProfileä¸º <code>host/gcc7_arm64</code>ã€‚</p><p>Profilesä½äº <code>config/valeria/r-car-h3/profiles</code>ï¼ˆR-Car H3ï¼‰ ï¼Œ<code>config/valeria/s32g/profiles</code>ï¼ˆS32Gï¼‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶éæ‰€æœ‰recipeséƒ½ä¼šå®šä¹‰åœ¨è¿™ä¸ªmanifestæ–‡ä»¶ä¸­ï¼Œä½ åªéœ€è¦åˆ—å‡ºä¾èµ–é“¾ä¸Šèµ·å§‹recipeã€‚ Conanä¼šæ„å»º <code>requires</code> æˆ– <code>build_requires</code> åˆ—å‡ºçš„recipeã€‚ ä¾‹å¦‚:</p><ul><li>EB corbos Linuxå¹¶æ²¡æœ‰åˆ—å‡ºæ¥ï¼Œå› ä¸ºå®ƒæ˜¯Hypervisorçš„æ„å»ºå¿…é¡»é¡¹ï¼ŒLinuxé•œåƒä¼šæ˜¯HypervisoråŒ…çš„ä¸€éƒ¨åˆ†</li><li>the compiler required for building the u-boot is not listed, as it is a build requirement of the u-boot.</li></ul><p>ä½œä¸ºä¾èµ–é¡¹çš„Profileï¼ŒConanä¼šè‡ªåŠ¨è¯»å–å®ƒä»¬ã€‚ ä¾‹å¦‚æ„å»ºfirmwareï¼Œéœ€è¦ç”¨åˆ°gcc-linaroç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨manifestä¸­æŒ‡å®šfirmwareåœ¨linuxç¯å¢ƒä¸­æ„å»ºï¼ŒConanä¼šçŸ¥é“éœ€è¦å…ˆæ„å»ºgcc-linaroã€‚</p><h2 id="ä»å…¶ä»–channelæ‹·è´åŒ…" tabindex="-1"><a class="header-anchor" href="#ä»å…¶ä»–channelæ‹·è´åŒ…" aria-hidden="true">#</a> ä»å…¶ä»–channelæ‹·è´åŒ…</h2><p>ç±»ä¼¼äºåœ¨gitçš„æŸä¸ªbranchä¸Šå·¥ä½œï¼Œä½ å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„Conan channelæ¥æ·»åŠ æ–°åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼ŒEB xelorå›¢é˜Ÿä¸ºæ¯ä¸€ä¸ªgitåˆ†æ”¯éƒ½æœ‰å¯¹åº”åä¸º<code>merge-EBCORE-&lt;jira-id&gt;</code>çš„channelã€‚ ä¸ºäº†é‡ç”¨ä¸»å¼€å‘åˆ†æ”¯çš„åŒ…ï¼Œå½“ä½ ä½¿ç”¨ <code>--conan-copy-ref &lt;ref_user&gt;/&lt;ref_channel&gt;:&lt;ref_repo&gt;</code> å‘½ä»¤æ—¶ï¼ŒValeriaä¼šæ‹·è´è¿™äº›åŒ…åˆ°ä½ çš„ä¸´æ—¶channelã€‚ åœ¨ä½ æ„å»ºä¹‹å‰ï¼ŒValeriaä¼šåœ¨ <code>ref_user</code> å’Œ <code>ref_channel</code> ä¸­æœç´¢ <code>ref_repo</code> åŒ…ï¼Œå¦‚æœæ‰¾åˆ°äº†ç›¸åŒçš„RREVä»¥åŠPackage ID, Valeria ä¼šä¸‹è½½åˆ°æœ¬åœ°ç¼“å­˜ï¼Œæ‹·è´åˆ°ä½ çš„user/channelä¸­ã€‚ ç”±äºå·²ç»æœ‰äº†åŒ…ï¼ŒConanä¸ä¼šå†æ„å»ºè¿™äº›åŒ…ã€‚å½“ä½ åœ¨è‡ªå·±çš„channelç¬¬ä¸€æ¬¡æ„å»ºï¼Œæˆ–è€…å°†masterçš„æ”¹åŠ¨mergeåˆ°ä½ çš„åˆ†æ”¯ä¸­æ—¶ï¼Œè¿™ä¸ªé€‰é¡¹å¯¹ä½ ä¼šå¾ˆæœ‰ç”¨ã€‚</p><h2 id="æ„å»ºéœ€æ±‚çš„å¤„ç†" tabindex="-1"><a class="header-anchor" href="#æ„å»ºéœ€æ±‚çš„å¤„ç†" aria-hidden="true">#</a> æ„å»ºéœ€æ±‚çš„å¤„ç†</h2><p>Conanå‡å®š <a href="https://docs.conan.io/en/latest/devtools/build_requires.html" target="_blank" rel="noopener noreferrer">build requirement<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>çš„æ”¹åŠ¨å¹¶ä¸ä¼šå½±å“ä½¿ç”¨å®ƒçš„äººæœ€ç»ˆç”Ÿæˆçš„åŒ…ã€‚ ä¾‹å¦‚ï¼Œå½“æ„å»ºéœ€æ±‚ä¸»è¦æ˜¯CMakeè¿™æ ·çš„æ„å»ºå·¥å…·æ—¶ï¼Œå°±å¾ˆæœ‰æ„ä¹‰ã€‚ å½“ç„¶ï¼Œåƒç¼–è¯‘å™¨è¿™æ ·çš„æ„å»ºéœ€æ±‚ï¼Œè‚¯å®šä¼šæœ‰ç›´æ¥å½±å“ã€‚ Conanæ–‡æ¡£æ¨èåœ¨ç›¸å…³recipeä¸­å®šä¹‰å¹¶å£°æ˜ç‰¹å®šçš„è®¾ç½®æˆ–é€‰é¡¹ï¼Œä½¿å®ƒåœ¨è®¡ç®—package IDæ—¶äº§ç”Ÿå½±å“ã€‚ ä¾‹å¦‚ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬ <code>compiler.version</code> ä¼šå½±å“package IDçš„è®¡ç®—. æ–°çš„ç¼–è¯‘å™¨ä¼šå¯¼è‡´äº§ç”Ÿä¸€ä¸ªæ–°çš„package IDï¼Œå³ä½¿ä½¿ç”¨äº† <code>missing</code> é€‰é¡¹ï¼Œè¿˜æ˜¯ä¼šè§¦å‘rebuildã€‚</p><p>Conanè®¡ç®—Package IDä¼šåŒ…å«éœ€æ±‚ç‰ˆæœ¬å’Œå…¶ä»–å±æ€§çš„å½±å“ï¼Œä¸éœ€è¦é¢å¤–è®¾ç½®ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href="https://docs.conan.io/en/latest/creating_packages/define_abi_compatibility.html" target="_blank" rel="noopener noreferrer">Conan package ABI compatibility<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>å½“ç„¶ï¼Œå¯¹äºæŒç»­é›†æˆç³»ç»Ÿæ¥è¯´ï¼Œä½ çš„ç›®æ ‡å¯èƒ½æ˜¯å¸Œæœ›å¼€å‘äººå‘˜çš„ä¸€ä¸ªå°æ”¹åŠ¨èƒ½å¾—åˆ°å¿«é€ŸéªŒè¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ åªæƒ³é‡æ–°æ„å»ºè¿™ä¸ªæ”¹åŠ¨æ‰€å½±å“çš„åŒ…ã€‚ å› æ­¤ï¼Œä¸€èˆ¬æ¥è¯´æŒç»­é›†æˆç³»ç»Ÿä¼šç”¨åˆ° <code>missing</code> é€‰é¡¹ã€‚ å¦å¤–ï¼Œåœ¨åˆå¹¶éªŒè¯æ—¶ï¼Œä½ å¯èƒ½ä¼šç”¨åˆ°channelæ‹·è´åŠŸèƒ½ï¼Œæ¥å®Œæˆbranch rebaseåçš„å¿«é€ŸéªŒè¯ã€‚</p><p>åœ¨EB xelorä¸­ï¼Œå¤§å¤šæ•°åŒ…æœ€åæ„å»ºå‡ºæ¥çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œéƒ½ä¼šç”±äºæ„å»ºéœ€æ±‚çš„å˜åŠ¨è€Œä¸åŒã€‚ ä¾‹å¦‚, <code>RT_RefApp</code> demoæ˜¯ä¾èµ–äºEB tresos AutoCoreäº§å“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥é€šè¿‡Conanè®¾å®šæ¥è§£å†³æ„å»ºéœ€æ±‚çš„é—®é¢˜ï¼Œä½†å½“ä½ æ¯æ¬¡æƒ³rebuildçš„æ—¶å€™ï¼Œä½ éƒ½éœ€è¦æ‰‹åŠ¨æ›´æ”¹è®¾å®šã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“ä½¿ç”¨ <code>--build &lt;policy&gt;</code> build policyæ—¶ï¼Œ Valeriaé€šè¿‡ä»¥ä¸‹æ–¹å¼å¤„ç†æ„å»ºéœ€æ±‚:</p><p>å°†æ‰€æœ‰recipeå¯¼å‡ºåˆ°Conanç¼“å­˜åï¼Œ Valeria ä¼šè§£ææ¯ä¸€ä¸ªä¾èµ–æ ‘ã€‚ å®ƒä¼šæ£€æŸ¥æ¯ä¸€ä¸ªæ„å»ºéœ€æ±‚ï¼Œæ˜¯å¦åœ¨æœ¬åœ°ç¼“å­˜æˆ–è€…è¿œç¨‹ä»“åº“å·²ç»æœ‰äº†ä¸€ä¸ªå…·æœ‰ç›¸åŒçš„åå­—ï¼Œç‰ˆæœ¬ï¼Œuserï¼Œchanneï¼Œrecipeç‰ˆæœ¬å’Œpackage IDçš„åŒ…ã€‚ å¦‚æœValeriaæ‰¾ä¸åˆ°è¿™æ ·çš„åŒ…ï¼Œå®ƒä¼šé‡æ–°æ„å»ºè¿™ä¸ªåŒ…ä»¥åŠä¾èµ–äºå®ƒçš„åŒ…ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰é€šè¿‡ <code>--build</code> é€‰é¡¹æä¾›äº†æ„å»ºpolicyï¼ŒConanä¼šæ„å»ºæ¯ä¸€ä¸ªåŒ…ã€‚</p><h2 id="packages-that-deploy-files" tabindex="-1"><a class="header-anchor" href="#packages-that-deploy-files" aria-hidden="true">#</a> Packages that deploy files</h2><p>EB xelorä¸­å¤§å¤šæ•°æå‰æ„å»ºå¥½çš„ConanåŒ…ï¼ŒåŒ…å«ç”±Conan recipe <code>package()</code> æ–¹æ³•æ‰“åŒ…è€Œæˆçš„æ„å»ºç‰©ï¼ˆfirmware, æ–‡ä»¶ç³»ç»Ÿimageç­‰ï¼‰ã€‚ å½“å®‰è£…æ­¤ç±»åŒ…æ—¶ï¼Œå®ƒä¼šæ ¹æ®Conan recipe <code>deploy()</code> æ–¹æ³•æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ä¸­ã€‚ EB xelor uses Conan&#39;s package deploy feature to get package contents available for the users and test systems.</p><p>æ‰§è¡ŒValeriaæ„å»ºå‘½ä»¤æ—¶ï¼Œå®ƒä¼šæ„å»ºå¹¶å®‰è£…åŒ…ï¼Œæ¯ä¸€ä¸ªå®‰è£…çš„åŒ…éƒ½ä¼šéƒ¨ç½²åœ¨ <code>build/deploy/buildspec-x</code> æ–‡ä»¶å¤¹, <code>x</code> ä»£è¡¨build manifestä¸­æ„å»ºå†…å®¹çš„åºå·ã€‚</p><p>å½“å†æ¬¡æ‰§è¡ŒValeriaæ„å»ºå‘½ä»¤(rebuilding)æ—¶ï¼Œå¦‚æœ <code>build/deploy</code> æ–‡ä»¶å¤¹ä¸ä¸ºç©º, Valeria ä¼šåœæ­¢æ„å»ºå¹¶æç¤ºè­¦å‘Šã€‚ è°ƒç”¨ValeriaæŒ‡ä»¤æ—¶æŒ‡å®š <code>-cdd</code> / <code>--clean-deploy-dir</code> é€‰é¡¹, å®ƒä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨æ¸…é™¤ <code>build/deploy</code> æ–‡ä»¶å¤¹å†…å®¹ã€‚</p><h2 id="å¦‚ä½•è°ƒç”¨valeria" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è°ƒç”¨valeria" aria-hidden="true">#</a> å¦‚ä½•è°ƒç”¨Valeria</h2><p>Valeriaæ˜¯ä¸€å¥—pythonè„šæœ¬ï¼Œä½äºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>tools/valeria/valeria.py
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä¸è¾“å…¥ä»»ä½•å‚æ•°æ—¶ï¼ŒValeriaä¼šæ˜¾ç¤ºå¸®åŠ©åˆ—è¡¨ã€‚</p><p>Valeriaä¼šåœ¨è°ƒç”¨çš„ç›®å½•ä¸‹å»ºç«‹ <code>build</code> å­ç›®å½•ã€‚ åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼ŒValeriaå®‰è£…ConanåŒ…ï¼Œä¸ºæ¯ä¸€ä¸ªæ„å»ºç»†åˆ™ç”Ÿæˆä¸‰ä¸ªConan lockfileã€‚</p><h3 id="lockfiles" tabindex="-1"><a class="header-anchor" href="#lockfiles" aria-hidden="true">#</a> Lockfiles</h3><p>lockfileså‘½åè§„åˆ™å¦‚ä¸‹: <code>valeria-buildspec-&lt;number&gt;-&lt;step&gt;.lock</code>. <code>number</code> ä»£è¡¨build manifestä¸­æ„å»ºç»†åˆ™çš„ä½ç½®ã€‚ lockfilesæœ‰å¦‚ä¸‹è¿™äº› <code>step</code>:</p><ul><li><code>valeria-buildspec-&lt;number&gt;-init.lock</code>: åœ¨æ‰§è¡Œ <code>conan install</code> ä¹‹å‰ï¼Œåˆ©ç”¨ <code>lock create</code> å‘½ä»¤ç”Ÿæˆã€‚å®ƒåŒ…å«æ„å»ºç»†åˆ™ä¸­é™¤äº†åŒ…ç‰ˆæœ¬ä¿¡æ¯çš„å®Œæ•´ä¾èµ–æ ‘ã€‚ Valeriaå°†è¿™ä¸ªæ–‡ä»¶ä½œä¸ºæ‰§è¡Œ <code>conan install</code> åŠ¨ä½œçš„è¾“å…¥ä¿¡æ¯ã€‚ è¿™ä¸ªæ–‡ä»¶åŒ…å«æ„å»ºéœ€æ±‚ä¿¡æ¯ã€‚</li><li><code>valeria-buildspec-&lt;number&gt;-inst.lock</code>: å®ƒæ˜¯ <code>conan install</code> å‘½ä»¤çš„è¾“å‡º. å®ƒåŒ…å«æ„å»ºçš„åŒ…çš„å®Œæ•´ç‰ˆæœ¬ä¿¡æ¯ã€‚ Additionally, each built Conan package has a &#39;modified&#39; entry.</li><li><code>valeria-buildspec-&lt;number&gt;-full.lock</code>: åœ¨æ‰§è¡Œ <code>conan install</code> ä¹‹åï¼Œåˆ©ç”¨ <code>lock create</code> å‘½ä»¤ç”Ÿæˆã€‚ å®ƒåŒ…å«æ„å»ºæˆ–ä¸‹è½½çš„åŒ…çš„å®Œæ•´ç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux" aria-hidden="true">#</a> Linux</h3><p>æœ¬èŠ‚æè¿°äº†å¦‚ä½•ä¸ºRenesas R-Car H3å’ŒNXP S32Gæ„å»ºå®Œæ•´EB xeloråŒ…ã€‚ ä»¥NXP S32Gä¸ºä¾‹ï¼Œå¦‚æœä½ æƒ³æ„å»ºH3, åªéœ€è¦å°† <code>s32g</code> æ›¿æ¢ä¸º <code>r-car-h3</code>ã€‚</p><p>å‡è®¾æºä»£ç åœ¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/workdir/EBxelor-2020.12
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>æ„å»ºçš„è¾“å‡ºæ–‡ä»¶åœ¨ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/workdir/valeria/s32g
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mkdir -p /workdir/valeria/s32g
cd /workdir/valeria/s32g
/workdir/EBxelor-2020.12/tools/valeria/valeria.py -b missing -M build \
-m /workdir/EBxelor-2020.12/config/valeria/s32g/manifests/\
buildmanifest_linuxbuild.xml \
-p /workdir/EBxelor-2020.12/config/valeria/s32g/profiles \
-r /workdir/EBxelor-2020.12/pkg \
-cr eb_core-devdrops \
-ccr EBxelor/2020.12:eb_core-releases \
-cdd \
your_user valeria-test
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä»¥ä¸Šå‘½ä»¤ä¸­å‡ºç°çš„é€‰é¡¹ï¼š</p><ul><li><code>-b missing -M build</code>: æ„å»ºæœ¬åœ°Conanç¼“å­˜æ²¡æœ‰çš„åŒ…ï¼Œä½¿ç”¨çš„æ„å»ºå‚æ•°æ˜¯ <code>missing</code></li><li><code>-m /workdir/EBxelor-2020.12/config/valeria/s32g/manifests/buildmanifest_linuxbuild.xml</code>: ä½¿ç”¨çš„build manifest</li><li><code>-p /workdir/EBxelor-2020.12/config/valeria/s32g/profiles</code>: profileè·¯å¾„</li><li><code>-r /workdir/EBxelor-2020.12/pkg</code>: recipeè·¯å¾„ï¼Œå­ç›®å½•ä¹Ÿä¼šè¢«è§£æ</li><li><code>-cr eb_core-devdrops</code>: <code>conan remote</code> ä¼šä½¿ç”¨åˆ°çš„Artifactoryä»“åº“ã€‚EB xelorçš„å¼€å‘ä½¿ç”¨ <code>eb_core-devdrops</code> ä»“åº“</li><li><code>-ccr EBxelor/2020.12:eb_core-releases</code>: ä»ç”¨æˆ· <code>EBxelor</code> ï¼Œchannel <code>2020.12</code> ï¼Œä»“åº“ <code>eb_core-releases</code> æ‹·è´å·²æœ‰ï¼ˆç›¸åŒï¼‰çš„åŒ…</li><li><code>-cdd</code>: åˆ é™¤å·²æœ‰çš„æ„å»ºç›®å½•</li><li><code>your_user valeria-test</code>: Conan ç”¨æˆ· å’Œ channel</li></ul><p>åç»­çš„è°ƒç”¨ä¸­ï¼Œ <code>-ccr</code> é€‰é¡¹å¯ä»¥å¿½ç•¥ï¼Œå®ƒæ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºæ–°channel <code>user/valeria-test</code> æ—¶ç”¨åˆ°çš„ã€‚</p><p>å¦‚æœä½ æƒ³ä¸Šä¼ åŒ…åˆ°è¿œç¨‹ä»“åº“ï¼Œä½¿ç”¨ <code>-n 0</code> å‘½ä»¤ã€‚</p><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> Windows</h3><p>å‡å®šæºä»£ç ä½äº <code>./EBxelor-2020.12</code> ï¼Œæˆ‘ä»¬åœ¨åŒç›®å½•åˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½• <code>./EBxelor-2020.12</code> ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå‡å®šæ„å»ºå‘½ä»¤åœ¨ä¾‹å¦‚git bashæˆ–cygwinè¿™æ ·çš„bash shellä¸­æ‰§è¡Œã€‚</p><p>åœ¨Windowsç¯å¢ƒä¸‹çš„è¯¦ç»†æ„å»ºæŒ‡å¯¼ï¼Œè¯·å‚è€ƒ <a href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/eb_tresos.html" class="">EB Tresos</a> ã€‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd valeria-build
python ../EBxelor-2020.12/tools/valeria/valeria.py -b missing -M build \
-m ../EBxelor-2020.12/config/valeria/s32g/manifests/\
buildmanifest_windowsbuild.xml \
-p ../EBxelor-2020.12/config/valeria/s32g/profiles \
-r ../EBxelor-2020.12/pkg \
-cr eb_core-devdrops \
-ccr EBxelor/2020.12:eb_core-releases \
-cdd \
your_user valeria-test
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å‚æ•°å®šä¹‰å’Œä¸Šæ–¹Linuxç¯å¢ƒæ„å»ºæ—¶ç›¸åŒã€‚</p><h3 id="ä¸‹è½½å‘å¸ƒåŒ…" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½å‘å¸ƒåŒ…" aria-hidden="true">#</a> ä¸‹è½½å‘å¸ƒåŒ…</h3><p>ä½ ä¹Ÿå¯ä»¥è°ƒç”¨Valeriaç›´æ¥ä¸‹è½½EB xelorå‘å¸ƒåŒ…ã€‚ ä»¥S32Gçš„ <code>2020.12</code> Linuxç¯å¢ƒå‘å¸ƒåŒ…ä¸ºä¾‹:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mkdir -p /workdir/valeria/s32g
cd /workdir/valeria/s32g
/workdir/EBxelor-2020.12/tools/valeria/valeria.py -b missing -M build \
-m /workdir/EBxelor-2020.12/config/valeria/s32g/manifests/\
buildmanifest_linuxbuild.xml \
-p /workdir/EBxelor-2020.12/config/valeria/s32g/profiles \
-r /workdir/EBxelor-2020.12/pkg \
-cr eb_core-releases \
-cdd \
EBxelor 2020.12
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸ä½¿ç”¨ <code>-ccr</code> ï¼ŒconanåŒ…ä¸ä¼šè¢«æ‹·è´åˆ°å¦ä¸€ä¸ªuser/channelå½“ä¸­ã€‚ ä½ éœ€è¦ä½¿ç”¨ç”¨æˆ· <code>EBxelor</code> ï¼Œchannel <code>2020.12</code>, ä»“åº“ <code>eb_core-releases</code> ã€‚ å½“ç„¶ï¼Œä½ ä¹Ÿæ— æ³•å°†åŒ…ä¸Šä¼ åˆ° <code>eb_core-releases</code> ä¸­ã€‚</p><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>å¦‚æœæœ¬åœ°æºä»£ç (ç›®å½• <code>/workdir/EBxelor-2020.12</code>) ä¸å‘å¸ƒï¼ˆä¾‹å¦‚ <code>EBxelor 2020.12</code> ï¼‰å®Œå…¨ç›¸åŒ, é‚£ä¹ˆè¿™äº›åŒ…å°†ç›´æ¥ä»Artifactoryä¸‹è½½ï¼Œè€Œä¸ä¼šrebuildã€‚</p><p>å¦‚æœæœ¬åœ°recipeæœ‰æ”¹åŠ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªrecipeä¼šè¢«é‡æ–°æ„å»ºã€‚</p></div><p>ä»¥S32Gçš„ <code>2020.12</code> Windowsç¯å¢ƒå‘å¸ƒåŒ…ä¸ºä¾‹: (æ›´å¤šWindowsç¯å¢ƒä¸‹Conané…ç½®ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="/ifs_shanghai_doc/zh/eb_xelor/user_guide/eb_tresos.html" class="">EB Tresos</a> ):</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd valeria-build
python ../EBxelor-2020.12/tools/valeria/valeria.py -b missing -M build \
-m ../EBxelor-2020.12/config/valeria/s32g/manifests/\
buildmanifest_windowsbuild.xml \
-p ../EBxelor-2020.12/config/valeria/s32g/profiles \
-r ../EBxelor-2020.12/pkg \
-cr eb_core-releases \
-cdd \
EBxelor 2020.12
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">æç¤º</p><p>å¦‚æœä¸æƒ³è§¦å‘é‡æ–°æ„å»ºï¼Œä½ å¯ä»¥è¿è¡ŒValeriaå‘½ä»¤ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯¹äºWindowsï¼ŒManifestæ–‡ä»¶æ˜¯ <code>buildmanifest_windowsbuild.xml</code> å¯¹äºLinuxï¼Œåˆ™æ˜¯ <code>buildmanifest_linuxbuild.xml</code> ã€‚</p></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/9/22 ä¸‹åˆ1:10:33</span></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: KimChan2013@users.noreply.github.com">Qian Chen</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/ifs_shanghai_doc/assets/js/runtime~app.dd0e7869.js" defer></script><script src="/ifs_shanghai_doc/assets/js/812.60586aed.js" defer></script><script src="/ifs_shanghai_doc/assets/js/app.3beca432.js" defer></script>
  </body>
</html>
